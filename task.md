# Linga 英语学习应用 (Windows) - 任务列表

- [ ] 项目初始化
    - [x] 创建初始规划文档
    - [x] 使用 Vite + React + Electron 初始化项目
    - [x] 设置基本文件夹结构
    - [ ] 配置 ESLint/Prettier
    - [x] UI/UX 重构 (基于新设计图)
        - [x] 安装图标库 `lucide-react`
        - [x] **[NEW]** 实现主布局容器 (MainLayout) 与背景样式
        - [x] **[NEW]** 实现底部导航栏 (词典, 首页, 图书馆, 锻炼, 个人资料)
        - [x] 调整标签顺序 (书库在词典左侧)
        - [x] 配置 React Router 路由结构
    - [/] **[NEW]** 测试与质量保证 (Testing & QA)
        - [x] 配置 Vitest & React Testing Library 环境
        - [x] 编写核心服务单元测试 (Services)
            - [x] WordStore (CRUD)
            - [x] HybridDictionaryService (聚合逻辑)
            - [x] TranslationService (Provider 切换)
        - [x] 编写关键组件集成测试
        - [x] 建立手动冒烟测试清单 (参考 verify_tests.md)

- [ ] 核心功能: 词典与统计 (Dictionary)
    - [/] **[NEW]** 构建混合词典服务 (Hybrid Dictionary Service)
        - [x] **ECDICT 集成**: 导入 ECDICT (简明英汉) 数据库 (SQLite/CSV) 到本地
        - [x] **Online API**: 集成 Free Dictionary API (获取英英释义/音频)
        - [x] **音频缓存系统**: 实现发音文件的自动下载与本地持久化 (Cache)
        - [x] **聚合逻辑**: 实现查询分发 (本地优先 -> 在线补充 -> AI 兜底)
    - [x] **性能优化 (Performance)**:
        - [x] 异步加载音频，避免阻塞 UI
        - [x] 优化查询弹窗样式，移除全屏遮挡感
    - [/] **[NEW]** 词典主页 UI 还原 (严格参考 image_acde20)
        - [x] 顶部 Tabs (我的单词 / 群组)
        - [x] "所有单词" 跳转条组件
        - [x] 统计与图表综合卡片 (包含时间过滤器)
        - [x] 统计数据展示 (蓝色"新单词"卡片 + 进行中/已学习状态)
        - [x] 底部悬浮 "添加单词" 按钮 (FAB)
    - [x] **[NEW]** 实现单词详情/查询弹窗 (Popup)
        - [x] **重构**: 从单纯显示 WordStore 数据升级为支持 HybridDictionaryResult
        - [x] **核心头部**: 显示单词原型, 音标, 词性, 频率标签
        - [x] **音频功能**: 优先播放本地缓存, 无缓存则联网播放并保存
        - [x] **基本释义**: 显示 ECDICT 中文解释
        - [x] **折叠内容区**:
            - [x] **句子**: 显示查询时的上下文原句/例句
            - [x] AI 模块: 调用 Ollama 进行 AI 翻译与词源解释 (UI 已实现, AI 功能待完善)
            - [x] 扩展信息: 定义, 示例 (Free Dictionary API)
        - [x] **底部操作**: "+ 到字典" / "移除" 状态切换按钮
        - [x] **搜索功能**: 支持从 FAB 按钮打开时输入单词搜索
    - [ ] 单词列表展示页 (点击"所有单词"后的页面)
    - [ ] **[NEW]** 外部词典扩展 (Low Priority / 后期开发)
        - [ ] 研究 .mdx (Mdict) 文件格式解析
        - [ ] 实现 .mdx 词典文件导入与查询解析

- [ ] 核心功能: 书库与阅读器 (Library)
    - [x] 添加 EPUB 解析库 (如 epub.js)
    - [x] 文件导入功能 (解析元数据：封面、标题)
    - [x] **[NEW]** 图书持久化存储 (IndexedDB/Electron-store)
        - [x] 实现保存已导入图书的路径和元数据
        - [x] 启动时加载图书列表
    - [x] **[NEW]** 书库管理 UI
        - [x] 网格视图显示图书封面
        - [x] 实现 "删除图书" 功能
    - [x] 阅读器核心功能 (翻页、进度)
    - [x] 阅读器交互 (点击查词 -> 触发上述单词详情弹窗)

- [ ] 核心功能: 锻炼 (Exercise)
    - [x] **[NEW]** 实现锻炼页 "混合练习" 顶部大卡片
    - [x] **[NEW]** 实现练习模式列表 (闪卡, 多项选择等)
    - [ ] 练习逻辑: 闪卡模式实现
    - [ ] 练习逻辑: 多项选择模式实现

- [ ] 数据与设置
    - [ ] 设置 SQLite/Store 数据库 (用于单词和图书记录)
    - [x] **[NEW]** 设置页面 UI 开发
        - [x] 实现 Ollama 配置模块 (服务器地址, 模型 ID, 自定义提示词)
        - [x] 配置持久化存储 (保存用户设置)
        - [x] 连接测试功能 (验证 Ollama 是否在线)
    - [/] 多源翻译支持 (Google API, DeepSeek, **Ollama**)
    - [ ] 生词状态管理 (New -> Learning -> Review)
    - [ ] 个人资料页 UI